{
  "version": 3,
  "sources": ["../../../src/cli/logs.ts"],
  "sourcesContent": ["import chalk from \"chalk\";\nimport { Command, Option } from \"commander\";\nimport { logMessage, oneoffContext } from \"../bundler/context.js\";\nimport { watchLogs } from \"./lib/logs.js\";\nimport { fetchDeploymentCredentialsProvisionProd } from \"./lib/api.js\";\n\nexport const logs = new Command(\"logs\")\n  .summary(\"Watch for logs in this project's Convex deployment\")\n  .description(\n    \"Stream function logs from your Convex deployment.\\nBy default, this streams from your project's dev deployment.\"\n  )\n  .option(\"--prod\", \"Watch logs in this project's production deployment.\")\n  .addOption(new Option(\"--admin-key <adminKey>\").hideHelp())\n  .addOption(new Option(\"--url <url>\").hideHelp())\n  .showHelpAfterError()\n  .action(async (cmdOptions) => {\n    const ctx = oneoffContext;\n\n    const credentials = await fetchDeploymentCredentialsProvisionProd(\n      ctx,\n      cmdOptions\n    );\n    if (cmdOptions.prod) {\n      logMessage(\n        ctx,\n        chalk.yellow(\n          `Watching logs for production deployment ${\n            credentials.deploymentName || \"\"\n          }...`\n        )\n      );\n    } else {\n      logMessage(\n        ctx,\n        chalk.yellow(\n          `Watching logs for dev deployment ${\n            credentials.deploymentName || \"\"\n          }...`\n        )\n      );\n    }\n    await watchLogs(ctx, credentials.url, credentials.adminKey, \"stdout\");\n  });\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,uBAAgC;AAChC,qBAA0C;AAC1C,kBAA0B;AAC1B,iBAAwD;AAEjD,MAAM,OAAO,IAAI,yBAAQ,MAAM,EACnC,QAAQ,oDAAoD,EAC5D;AAAA,EACC;AACF,EACC,OAAO,UAAU,qDAAqD,EACtE,UAAU,IAAI,wBAAO,wBAAwB,EAAE,SAAS,CAAC,EACzD,UAAU,IAAI,wBAAO,aAAa,EAAE,SAAS,CAAC,EAC9C,mBAAmB,EACnB,OAAO,OAAO,eAAe;AAC5B,QAAM,MAAM;AAEZ,QAAM,cAAc,UAAM;AAAA,IACxB;AAAA,IACA;AAAA,EACF;AACA,MAAI,WAAW,MAAM;AACnB;AAAA,MACE;AAAA,MACA,aAAAA,QAAM;AAAA,QACJ,2CACE,YAAY,kBAAkB;AAAA,MAElC;AAAA,IACF;AAAA,EACF,OAAO;AACL;AAAA,MACE;AAAA,MACA,aAAAA,QAAM;AAAA,QACJ,oCACE,YAAY,kBAAkB;AAAA,MAElC;AAAA,IACF;AAAA,EACF;AACA,YAAM,uBAAU,KAAK,YAAY,KAAK,YAAY,UAAU,QAAQ;AACtE,CAAC;",
  "names": ["chalk"]
}
