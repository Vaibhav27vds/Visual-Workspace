{
  "version": 3,
  "sources": ["../../../../src/server/impl/actions_impl.ts"],
  "sourcesContent": ["import { convexToJson, jsonToConvex, Value } from \"../../values/index.js\";\nimport { version } from \"../../index.js\";\nimport { performAsyncSyscall } from \"./syscall.js\";\nimport { parseArgs } from \"../../common/index.js\";\nimport { FunctionReference, getFunctionName } from \"../../server/api.js\";\n\nexport function setupActionCalls(requestId: string) {\n  return {\n    runQuery: async (\n      query: FunctionReference<\"query\", \"public\" | \"internal\">,\n      args?: Record<string, Value>\n    ): Promise<any> => {\n      const name = getFunctionName(query);\n      const queryArgs = parseArgs(args);\n      const syscallArgs = {\n        name,\n        args: convexToJson(queryArgs),\n        version,\n        requestId,\n      };\n      const result = await performAsyncSyscall(\n        \"1.0/actions/query\",\n        syscallArgs\n      );\n      return jsonToConvex(result, false);\n    },\n    runMutation: async (\n      mutation: FunctionReference<\"mutation\", \"public\" | \"internal\">,\n      args?: Record<string, Value>\n    ): Promise<any> => {\n      const name = getFunctionName(mutation);\n      const mutationArgs = parseArgs(args);\n      const syscallArgs = {\n        name,\n        args: convexToJson(mutationArgs),\n        version,\n        requestId,\n      };\n      const result = await performAsyncSyscall(\n        \"1.0/actions/mutation\",\n        syscallArgs\n      );\n      return jsonToConvex(result, false);\n    },\n    runAction: async (\n      action: FunctionReference<\"action\", \"public\" | \"internal\">,\n      args?: Record<string, Value>\n    ): Promise<any> => {\n      const name = getFunctionName(action);\n      const actionArgs = parseArgs(args);\n      const syscallArgs = {\n        name,\n        args: convexToJson(actionArgs),\n        version,\n        requestId,\n      };\n      const result = await performAsyncSyscall(\n        \"1.0/actions/action\",\n        syscallArgs\n      );\n      return jsonToConvex(result, false);\n    },\n  };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAkD;AAClD,eAAwB;AACxB,qBAAoC;AACpC,oBAA0B;AAC1B,iBAAmD;AAE5C,SAAS,iBAAiB,WAAmB;AAClD,SAAO;AAAA,IACL,UAAU,OACR,OACA,SACiB;AACjB,YAAM,WAAO,4BAAgB,KAAK;AAClC,YAAM,gBAAY,yBAAU,IAAI;AAChC,YAAM,cAAc;AAAA,QAClB;AAAA,QACA,UAAM,4BAAa,SAAS;AAAA,QAC5B;AAAA,QACA;AAAA,MACF;AACA,YAAM,SAAS,UAAM;AAAA,QACnB;AAAA,QACA;AAAA,MACF;AACA,iBAAO,4BAAa,QAAQ,KAAK;AAAA,IACnC;AAAA,IACA,aAAa,OACX,UACA,SACiB;AACjB,YAAM,WAAO,4BAAgB,QAAQ;AACrC,YAAM,mBAAe,yBAAU,IAAI;AACnC,YAAM,cAAc;AAAA,QAClB;AAAA,QACA,UAAM,4BAAa,YAAY;AAAA,QAC/B;AAAA,QACA;AAAA,MACF;AACA,YAAM,SAAS,UAAM;AAAA,QACnB;AAAA,QACA;AAAA,MACF;AACA,iBAAO,4BAAa,QAAQ,KAAK;AAAA,IACnC;AAAA,IACA,WAAW,OACT,QACA,SACiB;AACjB,YAAM,WAAO,4BAAgB,MAAM;AACnC,YAAM,iBAAa,yBAAU,IAAI;AACjC,YAAM,cAAc;AAAA,QAClB;AAAA,QACA,UAAM,4BAAa,UAAU;AAAA,QAC7B;AAAA,QACA;AAAA,MACF;AACA,YAAM,SAAS,UAAM;AAAA,QACnB;AAAA,QACA;AAAA,MACF;AACA,iBAAO,4BAAa,QAAQ,KAAK;AAAA,IACnC;AAAA,EACF;AACF;",
  "names": []
}
