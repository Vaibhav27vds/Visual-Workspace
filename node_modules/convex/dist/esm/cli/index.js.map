{
  "version": 3,
  "sources": ["../../../src/cli/index.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/* eslint-disable no-restricted-syntax */\nimport { Command } from \"commander\";\nimport { init } from \"./init.js\";\nimport { dashboard } from \"./dashboard.js\";\nimport { deployments } from \"./deployments.js\";\nimport { docs } from \"./docs.js\";\nimport { run } from \"./run.js\";\nimport { version } from \"./version.js\";\nimport { auth } from \"./auth.js\";\nimport { codegen } from \"./codegen.js\";\nimport { reinit } from \"./reinit.js\";\nimport { update } from \"./update.js\";\nimport { typecheck } from \"./typecheck.js\";\nimport { login } from \"./login.js\";\nimport { logout } from \"./logout.js\";\nimport chalk from \"chalk\";\nimport * as Sentry from \"@sentry/node\";\nimport \"@sentry/tracing\";\nimport stripAnsi from \"strip-ansi\";\nimport { productionProvisionHost, provisionHost } from \"./lib/config.js\";\nimport { convexImport } from \"./convexImport.js\";\nimport { dev } from \"./dev.js\";\nimport { deploy } from \"./deploy.js\";\nimport { logs } from \"./logs.js\";\n\nconst MINIMUM_MAJOR_VERSION = 16;\nconst MINIMUM_MINOR_VERSION = 15;\n\nasync function main() {\n  // If you want to use `@sentry/tracing` in your project directly, use a named import instead:\n  // import * as SentryTracing from \"@sentry/tracing\"\n  // Unused named imports are not guaranteed to patch the global hub.\n\n  if (!process.env.CI && provisionHost === productionProvisionHost) {\n    Sentry.init({\n      dsn: \"https://f9fa0306e3d540079cf40ce8c2ad9644@o1192621.ingest.sentry.io/6390839\",\n      release: \"cli@\" + version,\n      tracesSampleRate: 0.2,\n      beforeBreadcrumb: (breadcrumb) => {\n        // Strip ANSI color codes from log lines that are sent as breadcrumbs.\n        if (breadcrumb.message) {\n          breadcrumb.message = stripAnsi(breadcrumb.message);\n        }\n        return breadcrumb;\n      },\n    });\n  }\n\n  const nodeVersion = process.versions.node;\n  const majorVersion = parseInt(nodeVersion.split(\".\")[0], 10);\n  const minorVersion = parseInt(nodeVersion.split(\".\")[1], 10);\n  if (\n    majorVersion < MINIMUM_MAJOR_VERSION ||\n    (majorVersion === MINIMUM_MAJOR_VERSION &&\n      minorVersion < MINIMUM_MINOR_VERSION)\n  ) {\n    console.error(\n      chalk.red(\n        `Your Node version ${nodeVersion} is too old. Convex requires at least Node v${MINIMUM_MAJOR_VERSION}.${MINIMUM_MINOR_VERSION}`\n      )\n    );\n    console.error(\n      chalk.gray(\n        `You can use ${chalk.bold(\n          \"nvm\"\n        )} (https://github.com/nvm-sh/nvm#installing-and-updating) to manage different versions of Node.`\n      )\n    );\n    console.error(\n      chalk.gray(\n        \"After installing `nvm`, install the latest version of Node with \" +\n          chalk.bold(\"`nvm install node`.\")\n      )\n    );\n    console.error(\n      chalk.gray(\n        \"Then, activate the installed version in your terminal with \" +\n          chalk.bold(\"`nvm use`.\")\n      )\n    );\n    process.exit(1);\n  }\n\n  const program = new Command();\n  program\n    .name(\"convex\")\n    .usage(\"<command> [options]\")\n    .addCommand(login, { hidden: true })\n    .addCommand(init, { hidden: true })\n    .addCommand(reinit, { hidden: true })\n    .addCommand(dev)\n    .addCommand(deploy)\n    .addCommand(deployments, { hidden: true })\n    .addCommand(run)\n    .addCommand(typecheck, { hidden: true })\n    .addCommand(auth, { hidden: true })\n    .addCommand(convexImport)\n    .addCommand(codegen)\n    .addCommand(dashboard)\n    .addCommand(docs)\n    .addCommand(update)\n    .addCommand(logs)\n    .addCommand(logout)\n    .addHelpCommand(\"help <command>\", \"Show help for given <command>\")\n    .version(version)\n    // Hide version and help so they don't clutter\n    // the list of commands.\n    .configureHelp({ visibleOptions: () => [] })\n    .showHelpAfterError();\n\n  // Run the command and be sure to flush Sentry before exiting.\n  try {\n    await program.parseAsync(process.argv);\n  } catch (e) {\n    Sentry.captureException(e);\n    process.exitCode = 1;\n    console.error(chalk.red(\"Unexpected Error: \" + e));\n  } finally {\n    await Sentry.close();\n  }\n  process.exit();\n}\nvoid main();\n"],
  "mappings": ";;AAEA,SAAS,eAAe;AACxB,SAAS,YAAY;AACrB,SAAS,iBAAiB;AAC1B,SAAS,mBAAmB;AAC5B,SAAS,YAAY;AACrB,SAAS,WAAW;AACpB,SAAS,eAAe;AACxB,SAAS,YAAY;AACrB,SAAS,eAAe;AACxB,SAAS,cAAc;AACvB,SAAS,cAAc;AACvB,SAAS,iBAAiB;AAC1B,SAAS,aAAa;AACtB,SAAS,cAAc;AACvB,OAAO,WAAW;AAClB,YAAY,YAAY;AACxB,OAAO;AACP,OAAO,eAAe;AACtB,SAAS,yBAAyB,qBAAqB;AACvD,SAAS,oBAAoB;AAC7B,SAAS,WAAW;AACpB,SAAS,cAAc;AACvB,SAAS,YAAY;AAErB,MAAM,wBAAwB;AAC9B,MAAM,wBAAwB;AAE9B,eAAe,OAAO;AAKpB,MAAI,CAAC,QAAQ,IAAI,MAAM,kBAAkB,yBAAyB;AAChE,WAAO,KAAK;AAAA,MACV,KAAK;AAAA,MACL,SAAS,SAAS;AAAA,MAClB,kBAAkB;AAAA,MAClB,kBAAkB,CAAC,eAAe;AAEhC,YAAI,WAAW,SAAS;AACtB,qBAAW,UAAU,UAAU,WAAW,OAAO;AAAA,QACnD;AACA,eAAO;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAEA,QAAM,cAAc,QAAQ,SAAS;AACrC,QAAM,eAAe,SAAS,YAAY,MAAM,GAAG,EAAE,CAAC,GAAG,EAAE;AAC3D,QAAM,eAAe,SAAS,YAAY,MAAM,GAAG,EAAE,CAAC,GAAG,EAAE;AAC3D,MACE,eAAe,yBACd,iBAAiB,yBAChB,eAAe,uBACjB;AACA,YAAQ;AAAA,MACN,MAAM;AAAA,QACJ,qBAAqB,0DAA0D,yBAAyB;AAAA,MAC1G;AAAA,IACF;AACA,YAAQ;AAAA,MACN,MAAM;AAAA,QACJ,eAAe,MAAM;AAAA,UACnB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,YAAQ;AAAA,MACN,MAAM;AAAA,QACJ,qEACE,MAAM,KAAK,qBAAqB;AAAA,MACpC;AAAA,IACF;AACA,YAAQ;AAAA,MACN,MAAM;AAAA,QACJ,gEACE,MAAM,KAAK,YAAY;AAAA,MAC3B;AAAA,IACF;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,QAAM,UAAU,IAAI,QAAQ;AAC5B,UACG,KAAK,QAAQ,EACb,MAAM,qBAAqB,EAC3B,WAAW,OAAO,EAAE,QAAQ,KAAK,CAAC,EAClC,WAAW,MAAM,EAAE,QAAQ,KAAK,CAAC,EACjC,WAAW,QAAQ,EAAE,QAAQ,KAAK,CAAC,EACnC,WAAW,GAAG,EACd,WAAW,MAAM,EACjB,WAAW,aAAa,EAAE,QAAQ,KAAK,CAAC,EACxC,WAAW,GAAG,EACd,WAAW,WAAW,EAAE,QAAQ,KAAK,CAAC,EACtC,WAAW,MAAM,EAAE,QAAQ,KAAK,CAAC,EACjC,WAAW,YAAY,EACvB,WAAW,OAAO,EAClB,WAAW,SAAS,EACpB,WAAW,IAAI,EACf,WAAW,MAAM,EACjB,WAAW,IAAI,EACf,WAAW,MAAM,EACjB,eAAe,kBAAkB,+BAA+B,EAChE,QAAQ,OAAO,EAGf,cAAc,EAAE,gBAAgB,MAAM,CAAC,EAAE,CAAC,EAC1C,mBAAmB;AAGtB,MAAI;AACF,UAAM,QAAQ,WAAW,QAAQ,IAAI;AAAA,EACvC,SAAS,GAAP;AACA,WAAO,iBAAiB,CAAC;AACzB,YAAQ,WAAW;AACnB,YAAQ,MAAM,MAAM,IAAI,uBAAuB,CAAC,CAAC;AAAA,EACnD,UAAE;AACA,UAAM,OAAO,MAAM;AAAA,EACrB;AACA,UAAQ,KAAK;AACf;AACA,KAAK,KAAK;",
  "names": []
}
