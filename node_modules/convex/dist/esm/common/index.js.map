{
  "version": 3,
  "sources": ["../../../src/common/index.ts"],
  "sourcesContent": ["import type { Value } from \"../values/value.js\";\n\n/**\n * Validate that the arguments to a Convex function are an object, defaulting\n * `undefined` to `{}`.\n */\nexport function parseArgs(\n  args: Record<string, Value> | undefined\n): Record<string, Value> {\n  if (args === undefined) {\n    return {};\n  }\n  if (!isSimpleObject(args)) {\n    throw new Error(\n      `The arguments to a Convex function must be an object. Received: ${\n        args as any\n      }`\n    );\n  }\n  return args;\n}\n\nexport function validateDeploymentUrl(deploymentUrl: string) {\n  // Don't use things like `new URL(deploymentUrl).hostname` since these aren't\n  // supported by React Native's JS environment\n  if (typeof deploymentUrl === \"undefined\") {\n    throw new Error(\n      `Client created with undefined deployment address. If you used an environment variable, check that it's set.`\n    );\n  }\n  if (typeof deploymentUrl !== \"string\") {\n    throw new Error(\n      `Invalid deployment address: found ${deploymentUrl as any}\".`\n    );\n  }\n  if (\n    !(deploymentUrl.startsWith(\"http:\") || deploymentUrl.startsWith(\"https:\"))\n  ) {\n    throw new Error(\n      `Invalid deployment address: Must start with \"https://\" or \"http://\". Found \"${deploymentUrl}\".`\n    );\n  }\n\n  // Skip validation on localhost because it's for internal Convex development.\n  if (\n    deploymentUrl.indexOf(\"127.0.0.1\") !== -1 ||\n    deploymentUrl.indexOf(\"localhost\") !== -1\n  ) {\n    return;\n  }\n\n  if (!deploymentUrl.endsWith(\".convex.cloud\")) {\n    throw new Error(\n      `Invalid deployment address: Must end with \".convex.cloud\". Found \"${deploymentUrl}\".`\n    );\n  }\n}\n\n/**\n * Check whether a value is a plain old JavaScript object.\n */\nexport function isSimpleObject(value: unknown) {\n  const isObject = typeof value === \"object\";\n  const prototype = Object.getPrototypeOf(value);\n  const isSimple =\n    prototype === null ||\n    prototype === Object.prototype ||\n    // Objects generated from other contexts (e.g. across Node.js `vm` modules) will not satisfy the previous\n    // conditions but are still simple objects.\n    prototype?.constructor?.name === \"Object\";\n  return isObject && isSimple;\n}\n"],
  "mappings": ";AAMO,gBAAS,UACd,MACuB;AACvB,MAAI,SAAS,QAAW;AACtB,WAAO,CAAC;AAAA,EACV;AACA,MAAI,CAAC,eAAe,IAAI,GAAG;AACzB,UAAM,IAAI;AAAA,MACR,mEACE;AAAA,IAEJ;AAAA,EACF;AACA,SAAO;AACT;AAEO,gBAAS,sBAAsB,eAAuB;AAG3D,MAAI,OAAO,kBAAkB,aAAa;AACxC,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACA,MAAI,OAAO,kBAAkB,UAAU;AACrC,UAAM,IAAI;AAAA,MACR,qCAAqC;AAAA,IACvC;AAAA,EACF;AACA,MACE,EAAE,cAAc,WAAW,OAAO,KAAK,cAAc,WAAW,QAAQ,IACxE;AACA,UAAM,IAAI;AAAA,MACR,+EAA+E;AAAA,IACjF;AAAA,EACF;AAGA,MACE,cAAc,QAAQ,WAAW,MAAM,MACvC,cAAc,QAAQ,WAAW,MAAM,IACvC;AACA;AAAA,EACF;AAEA,MAAI,CAAC,cAAc,SAAS,eAAe,GAAG;AAC5C,UAAM,IAAI;AAAA,MACR,qEAAqE;AAAA,IACvE;AAAA,EACF;AACF;AAKO,gBAAS,eAAe,OAAgB;AAC7C,QAAM,WAAW,OAAO,UAAU;AAClC,QAAM,YAAY,OAAO,eAAe,KAAK;AAC7C,QAAM,WACJ,cAAc,QACd,cAAc,OAAO;AAAA;AAAA,EAGrB,WAAW,aAAa,SAAS;AACnC,SAAO,YAAY;AACrB;",
  "names": []
}
